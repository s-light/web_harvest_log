(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"20b6":function(e,t,s){"use strict";s("7bf0")},"7bf0":function(e,t,s){},"8b93":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));s("fb6a"),s("ddb0");var a=s("2f62");const c=function(e,t){const s=Object(a.b)(e,t),c={};for(const[t,a]of Object.entries(s))c[t]={get:a},c[t].set=function(s){const a="set"+((c=t).charAt(0).toUpperCase()+c.slice(1));var c;this.$store.commit(e+"/"+a,s)};return c}},b5ee:function(e,t,s){},dd36:function(e,t,s){"use strict";s("b5ee")},dff9:function(e,t,s){"use strict";s.r(t);s("5319");var a=s("ded3"),c=s.n(a),i=s("9e62"),n=s("8b93"),l={name:"keypad",model:{prop:"value",event:"change"},data:()=>({keys:[7,8,9,4,5,6,1,2,3,0,",","del"],lastKeyDecimal:!1}),props:{value:{type:[String],required:!0}},methods:{push:function(e){console.log("key",e),console.log("this.value",this.value);let t="",s=this.value.toString();switch(s=s.replace(",","."),console.log("valueStr",s),s=s.replace(".00",""),this.lastKeyDecimal&&(this.lastKeyDecimal=!1,s+="."),console.log("valueStr",s),e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:t=s+e.toString();break;case",":t=s,this.lastKeyDecimal=!0;break;case"del":t="0"}console.log("result",t),this.$emit("change",t)}}},r=(s("dd36"),s("2877")),o=s("9c40"),h=s("eebe"),d=s.n(h),u=Object(r.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"keypad"},e._l(e.keys,(function(t){return s("q-btn",{key:t,attrs:{label:t,ripple:{early:!0,color:"orange"}},on:{click:function(s){return e.push(t)}}})})),1)}),[],!1,null,null,null),p=u.exports;d()(u,"components",{QBtn:o.a});var g={name:"PageSaveHarvest",data:()=>({imageBaseURL:"http://localhost:3030/api/"}),methods:{save:function(){if(console.group("save harvest log entry"),console.log("this.crateSelected._id",this.crateSelected._id),console.log("this.cropSelected._id",this.cropSelected._id),console.log("this.placeSelected._id",this.placeSelected._id),this.crateSelected._id&&this.cropSelected._id&&!isNaN(this.placeSelected._id)){new(0,this.$FeathersVuex.api.Harvest)({crate:this.crateSelected,crop:this.cropSelected,place:this.placeSelected,crateTareWeight:this.crateSelected.tareWeight,cropText:this.cropSelected.text,placeText:this.placeSelected.text,weight:this.currentWeight,scaleUnit:this.scaleUnit,createdAt:new Date}).save()}else this.$q.notify({color:"negative",message:"Please Check that all requirements are filled.",icon:"report_problem"});console.groupEnd()}},computed:c()(c()({currentWeight:{get:function(){let e=this.totalWeight;return e&&!isNaN(e)?this.crateSelected&&this.crateSelected.tareWeight&&(e-=this.crateSelected.tareWeight):e=0,e=this.$options.filters.formatWeight(e),e},set:function(e){e=e.replace(",",".");let t=parseFloat(e);this.crateSelected&&this.crateSelected.tareWeight&&(t+=this.crateSelected.tareWeight,t=t.toFixed(2)),this.totalWeight=t}}},Object(n.a)("localconfig",["btnSize","btnSpace","keypadVisible","crateSelected","cropSelected","placeSelected","totalWeight","scaleStable","scaleUnit"])),{},{harvestParams:()=>({query:{$limit:20,$sort:{createdAt:-1}}}),lang:function(){let e=this.$q.lang.isoName;return e||(e="de"),e}}),mixins:[Object(i.b)({service:"harvest"})],components:{keypad:p}},m=(s("20b6"),s("9989")),f=s("27f9"),v=s("1c1c"),b=s("66e5"),y=s("4074"),_=s("cb32"),S=Object(r.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"fit"},[s("section",{staticClass:"row no-wrap justify-evenly items-stretch content-stretch"},[s("section",{staticClass:"column no-wrap justify-evenly items-stretch content-stretch"},[s("div",{staticClass:"q-mt-md"},[s("q-input",{staticClass:"weight_display",attrs:{debounce:"500","input-class":"text-right",filled:"","hide-bottom-space":"","item-aligned":"","label-slot":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save()}},scopedSlots:e._u([{key:"label",fn:function(){return[s("div",{staticClass:"row justify-between items-start content-start",staticStyle:{"font-size":"2em","line-height":"2em"}},[s("div",{},[e._v("\n                                "+e._s(e.$t("weight"))+"\n                            ")]),s("div",{staticStyle:{"font-size":"0.8em"}},[e._v("\n                                "+e._s(e._f("formatWeight")(e.totalWeight,e.lang))+" "+e._s(e.scaleUnit)+" "+e._s(e.$t("scale"))+" -\n                                Tare: "+e._s(e._f("formatWeight")(e.crateSelected.tareWeight,e.lang))+" "+e._s(e.scaleUnit)+"\n                            ")])])]},proxy:!0},{key:"append",fn:function(){return[e._v("\n                        "+e._s(e.scaleUnit)+"\n                    ")]},proxy:!0}]),model:{value:e.currentWeight,callback:function(t){e.currentWeight=t},expression:"currentWeight"}})],1),s("section",{staticClass:"col-grow row no-wrap justify-evenly items-stretch content-stretch"},[s("q-btn",{staticClass:"col",staticStyle:{"min-width":"50mm","min-height":"50mm",margin:"0.2em"},attrs:{label:e.$t("save"),icon:"mdi-database-plus",ripple:{early:!0,color:"orange"},stack:"",size:"20mm"},on:{click:function(t){return e.save()}}}),e.keypadVisible?s("keypad",{staticClass:"col",staticStyle:{margin:"0.2em"},model:{value:e.currentWeight,callback:function(t){e.currentWeight=t},expression:"currentWeight"}}):e._e()],1)]),s("section",{staticClass:"row justify-between items-stretch content-stretch",staticStyle:{"min-width":"28em",overflowY:"scroll","max-height":"100vh"}},[s("q-list",e._l(e.harvest,(function(t){return s("q-item",{key:t._id},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{rounded:""}},[s("img",{attrs:{src:e.imageBaseURL+t.crop.image}})])],1),s("q-item-section",[e._v("\n                            "+e._s(t.crop.text)+" "),s("br"),e._v("\n                            "+e._s(t.place.text)+" |\n                            "+e._s(t.weight)+" "+e._s(t.scaleUnit)+"\n                            "),e._v("\n                            "+e._s(e._f("toLocal")(t.createdAt,e.lang))+"\n                        ")])],1)})),1)],1)])])}),[],!1,null,"5a01f114",null);t.default=S.exports;d()(S,"components",{QPage:m.a,QInput:f.a,QBtn:o.a,QList:v.a,QItem:b.a,QItemSection:y.a,QAvatar:_.a})}}]);
//# sourceMappingURL=3.e9323063.js.map