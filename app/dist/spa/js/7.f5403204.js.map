{"version":3,"sources":["webpack:///./src/pages/SaveHarvest.vue?7e94","webpack:///./src/store/mapBind.js","webpack:///./src/pages/SaveHarvest.vue?6c69","webpack:///./src/pages/SaveHarvest.vue?b8ac","webpack:///src/pages/SaveHarvest.vue","webpack:///./src/pages/SaveHarvest.vue"],"names":["mapBind","base","params","map","mapState","result","key","value","Object","entries","get","set","val","mutationName","string","charAt","toUpperCase","slice","this","$store","commit","component","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","type","indexOf","_k","keyCode","save","scopedSlots","_u","fn","staticStyle","_v","_s","$t","_f","totalWeight","lang","scaleUnit","crateSelected","tareWeight","proxy","model","callback","$$v","currentWeight","expression","_l","item","_id","imageBaseURL","crop","image","text","place","weight","createdAt","scaleStable","early","color","QPage","QInput","QList","QItem","QItemSection","QAvatar","QBtn"],"mappings":"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","file":"js/7.f5403204.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-2-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-2-2!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveHarvest.vue?vue&type=style&index=0&id=438ebc19&scoped=true&lang=css&\"","// ------------------------------------------\n// usage:\n// import { mapBind } from 'store/mapBind.js'\n//\n// export default {\n//     name: 'ComponentName',\n//     computed: {\n//         ...mapBind('appconfig', ['globalMessage', 'someOtherThing'])\n//     },\n// }\n\n// inspired by https://stackoverflow.com/a/48447361/574981\n\nimport { mapState } from 'vuex'\n\n// export const mapBind = (base, params = {}) => (\n// export const mapBind = (base, params) => (\nexport const mapBind = function (base, params) {\n    // helper function for vuex\n    // create setter and getter functions for given store and properties\n    function capitalizeFirstLetter (string) {\n        // https://stackoverflow.com/questions/1026069/how-do-i-make-the-first-letter-of-a-string-uppercase-in-javascript\n        return string.charAt(0).toUpperCase() + string.slice(1)\n    }\n\n    const map = mapState(base, params)\n    const result = {}\n    // console.log(map)\n    for (const [key, value] of Object.entries(map)) {\n        // console.log('key', key)\n        // console.log('value', value)\n        result[key] = {\n            get: value\n        }\n        result[key].set = function (val) {\n            // this.$store.commit('appconfig/setGlobalMessage', val)\n            const mutationName = 'set' + capitalizeFirstLetter(key)\n            this.$store.commit(base + '/' + mutationName, val)\n        }\n    }\n    // console.log(result)\n    return result\n// )\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{staticClass:\"fit\"},[_c('section',{staticClass:\"fit column no-wrap justify-between items-stretch content-stretch\"},[_c('div',{staticClass:\"q-mt-md\"},[_c('q-input',{staticClass:\"weight_display\",attrs:{\"input-class\":\"text-right\",\"filled\":\"\",\"hide-bottom-space\":\"\",\"item-aligned\":\"\",\"label-slot\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save()}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('div',{staticClass:\"row justify-between items-start content-start\",staticStyle:{\"font-size\":\"2em\",\"line-height\":\"2em\"}},[_c('div',{},[_vm._v(\"\\n                            \"+_vm._s(_vm.$t('weight'))+\"\\n                        \")]),_c('div',{staticStyle:{\"font-size\":\"0.8em\"}},[_vm._v(\"\\n                            \"+_vm._s(_vm._f(\"formatWeight\")(_vm.totalWeight,_vm.lang))+\" \"+_vm._s(_vm.scaleUnit)+\" \"+_vm._s(_vm.$t('scale'))+\" -\\n                            Tare: \"+_vm._s(_vm._f(\"formatWeight\")(_vm.crateSelected.tareWeight,_vm.lang))+\" \"+_vm._s(_vm.scaleUnit)+\"\\n                        \")])])]},proxy:true},{key:\"append\",fn:function(){return [_vm._v(\"\\n                    \"+_vm._s(_vm.scaleUnit)+\"\\n                \")]},proxy:true}]),model:{value:(_vm.currentWeight),callback:function ($$v) {_vm.currentWeight=$$v},expression:\"currentWeight\"}})],1),_c('section',{staticClass:\"row justify-between items-stretch content-stretch\"},[_c('div',{staticStyle:{\"flex\":\"1 1 auto\",\"padding\":\"1em\"}},[_c('q-list',_vm._l((_vm.harvest),function(item){return _c('q-item',{key:item._id},[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-avatar',{attrs:{\"rounded\":\"\"}},[_c('img',{attrs:{\"src\":_vm.imageBaseURL + item.crop.image}})])],1),_c('q-item-section',[_vm._v(\"\\n                            \"+_vm._s(item.crop.text)+\" \"),_c('br'),_vm._v(\"\\n                            \"+_vm._s(item.place.text)+\" |\\n                            \"+_vm._s(item.weight)+\" \"+_vm._s(item.scaleUnit)+\"\\n                            \"),_vm._v(\"\\n                            \"+_vm._s(_vm._f(\"toLocal\")(item.createdAt,_vm.lang))+\"\\n                        \")])],1)}),1)],1),_c('q-btn',{staticStyle:{\"width\":\"80mm\",\"height\":\"80mm\",\"flex\":\"0 1 auto\",\"margin-right\":\"0.2em\"},attrs:{\"label\":_vm.$t('save'),\"disable\":!_vm.scaleStable,\"icon\":\"mdi-database-plus\",\"ripple\":{ early: true, color: 'orange'},\"stack\":\"\",\"size\":\"20mm\"},on:{\"click\":function($event){return _vm.save()}}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveHarvest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveHarvest.vue?vue&type=script&lang=js&\"","<template>\n    <q-page class=\"fit\">\n        <section class=\"fit column no-wrap justify-between items-stretch content-stretch\">\n            <div class=\"q-mt-md\">\n                <!-- <div id=\"weight_display\" class=\"\">\n                    total weight: {{ totalWeight | formatWeight(lang) }} {{ scaleUnit }}\n                </div> -->\n                <!-- '{{ lang }}' -->\n                <!-- hint=\"Mask: #.##\" -->\n                <!-- input-style=\"height: 50px;\" -->\n                <q-input\n                    v-model=\"currentWeight\"\n                    @keyup.enter=\"save()\"\n                    class=\"weight_display\"\n                    input-class=\"text-right\"\n                    filled\n                    hide-bottom-space\n                    item-aligned\n                    label-slot\n                >\n                <!-- debounce=\"500\" -->\n                    <template v-slot:label>\n                        <div class=\"row justify-between items-start content-start\" style=\"font-size:2em; line-height:2em\">\n                            <div style=\"\">\n                                {{ $t('weight') }}\n                            </div>\n                            <div style=\"font-size: 0.8em\">\n                                {{ totalWeight | formatWeight(lang) }} {{ scaleUnit }} {{ $t('scale') }} -\n                                Tare: {{ crateSelected.tareWeight | formatWeight(lang) }} {{ scaleUnit }}\n                            </div>\n                        </div>\n                    </template>\n                    <template #append>\n                        {{ scaleUnit }}\n                    </template>\n                </q-input>\n            </div>\n            <section class=\"row justify-between items-stretch content-stretch\">\n                <div style=\"flex: 1 1 auto; padding:1em;\">\n                    <q-list>\n                        <q-item\n                            v-for=\"item in harvest\"\n                            :key=\"item._id\"\n                        >\n                            <q-item-section avatar>\n                                <q-avatar rounded>\n                                    <img :src=\"imageBaseURL + item.crop.image\">\n                                </q-avatar>\n                            </q-item-section>\n                            <q-item-section>\n                                {{ item.crop.text }} <br>\n                                {{ item.place.text }} |\n                                {{item.weight}} {{item.scaleUnit}}\n                                <!-- {{ item.createdAt | formatdate() }} -->\n                                {{ item.createdAt | toLocal(lang) }}\n                            </q-item-section>\n                        </q-item>\n                    </q-list>\n                    <!-- <debugSection label=\"harvest\" :obj=\"harvest\"/> -->\n                </div>\n                <q-btn\n                    :label=\"$t('save')\"\n                    :disable=\"!scaleStable\"\n                    @click=\"save()\"\n                    icon=\"mdi-database-plus\"\n                    :ripple=\"{ early: true, color: 'orange'}\"\n                    stack\n                    class=\"\"\n                    style=\"width:80mm; height:80mm; flex: 0 1 auto; margin-right: 0.2em;\"\n                    size=\"20mm\"\n                />\n                <!-- :style=\"btnStyle\" -->\n                <!-- size=\"30mm\" -->\n                <!-- icons:\n                send\n                mdi-content-save\n                mdi-content-save-move\n                mdi-database-check\n                mdi-database-plus\n                mdi-database-arrow-down\n                mdi-check-bold\n                -->\n            </section>\n        </section>\n        <!-- <section style=\"font-size:0.8em;\">\n            <debugSection label=\"crateSelected\" :obj=\"crateSelected\"/>\n            <debugSection label=\"cropSelected\" :obj=\"cropSelected\"/>\n            <debugSection label=\"placeSelected\" :obj=\"placeSelected\"/>\n        </section> -->\n    </q-page>\n</template>\n\n<script>\nimport { date } from 'quasar'\nimport { makeFindMixin } from 'feathers-vuex'\nimport { mapBind } from '../store/mapBind.js'\n// import DebugSection from 'components/debugSection'\n// import BtnToggleGrid from 'components/BtnToggleGrid.vue'\n\nexport default {\n    name: 'PageSaveHarvest',\n    data () {\n        return {\n            imageBaseURL: 'http://localhost:3030/api/'\n        }\n    },\n    methods: {\n        save: function () {\n            console.group('save harvest log entry')\n            // console.log('crateSelected', this.crateSelected)\n            // console.log('cropSelected', this.cropSelected)\n            // console.log('placeSelected', this.placeSelected)\n            // console.log('totalWeight', this.totalWeight)\n            // console.log('currentWeight', this.currentWeight)\n            // console.log('scaleStable', this.scaleStable)\n            // console.log('scaleUnit', this.scaleUnit)\n            // check if all requirements are fine\n            if (\n                this.crateSelected._id &&\n                this.cropSelected._id &&\n                this.placeSelected._id &&\n                this.scaleStable\n            ) {\n                const Harvest = this.$FeathersVuex.api.Harvest\n                const entry = new Harvest({\n                    crate: this.crateSelected,\n                    crop: this.cropSelected,\n                    place: this.placeSelected,\n                    crateTareWeight: this.crateSelected.tareWeight,\n                    cropText: this.cropSelected.text,\n                    placeText: this.placeSelected.text,\n                    weight: this.currentWeight,\n                    scaleUnit: this.scaleUnit,\n                    createdAt: new Date()\n                })\n                entry.save()\n            } else {\n                this.$q.notify({\n                    color: 'negative',\n                    message: 'Please Check that all requirements are filled.',\n                    icon: 'report_problem'\n                })\n            }\n\n            console.groupEnd()\n        }\n    },\n    computed: {\n        currentWeight: function () {\n            let result = this.totalWeight\n            if (result && !isNaN(result)) {\n                if (\n                    this.crateSelected &&\n                    this.crateSelected.tareWeight\n                ) {\n                    result -= this.crateSelected.tareWeight\n                    result = result.toFixed(2)\n                }\n            } else {\n                result = 0\n            }\n            return result\n        },\n        ...mapBind('localconfig', [\n            'btnSize',\n            'btnSpace',\n            'crateSelected',\n            'cropSelected',\n            'placeSelected',\n            'totalWeight',\n            'scaleStable',\n            'scaleUnit'\n        ]),\n        // ]),\n        harvestParams () {\n            return {\n                query: {\n                    $limit: 15,\n                    $sort: {\n                        createdAt: -1\n                    }\n                }\n            }\n        },\n        // btnStyle: function () {\n        //     return {\n        //         width: '100%',\n        //         height: '100%'\n        //     }\n        // },\n        lang: function () {\n            // return this.$i18n.locale\n            let result = this.$q.lang.isoName\n            if (!result) {\n                result = 'de'\n            }\n            return result\n        }\n    },\n    mixins: [\n        makeFindMixin({ service: 'harvest' })\n    ],\n    filters: {\n        formatWeight (value, lang = 'de') {\n            // console.log('value', value)\n            // console.log('lang', lang)\n            // return value.toLocaleString(\n            const result = value.toLocaleString(\n                lang,\n                {\n                    minimumFractionDigits: 2,\n                    maximumFractionDigits: 2\n                }\n            )\n            // console.log('result', result)\n            return result\n        },\n        formatdate (value, format = 'HH:mm:ss DD.MM.YYYY') {\n            // 'YYYY-MM-DDTHH:mm:ss.SSSZ'\n            return date.formatDate(new Date(value), format)\n        },\n        toLocal (value, lang = 'de') {\n            return new Date(value).toLocaleString(lang)\n        }\n    },\n    components: {\n        // BtnToggleGrid,\n        // DebugSection\n    }\n}\n</script>\n\n<style scoped>\n.weight_display {\n    font-size: 12em;\n}\n/* all other styles are in the global space - otherwise they do not work! */\n</style>\n","import { render, staticRenderFns } from \"./SaveHarvest.vue?vue&type=template&id=438ebc19&scoped=true&\"\nimport script from \"./SaveHarvest.vue?vue&type=script&lang=js&\"\nexport * from \"./SaveHarvest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SaveHarvest.vue?vue&type=style&index=0&id=438ebc19&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"438ebc19\",\n  null\n  \n)\n\nexport default component.exports\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QList from 'quasar/src/components/item/QList.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(component, 'components', {QPage,QInput,QList,QItem,QItemSection,QAvatar,QBtn});\n"],"sourceRoot":""}